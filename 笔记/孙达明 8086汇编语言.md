# 8086汇编语言教程

### 一、学习的目的和意义

- 许多程序员非常擅长高级语言但是对基础的汇编语言机会没有任何了解，导致很多时候编译出来的程序总会出现很多出乎意料的问题
- 很多嵌入式程序和操作系统都是基于汇编语言进行编写的
- 想要学到更深的境界和机器的思维就需要了解计算机的思考方式，也就是汇编语言
- 一些反编译和计算机安全操作最多涉及的就是汇编语言，也是弥补我童年的一个遗憾
- 很多同学对底层很感兴趣，所以做了这篇教程
- 为了涉及更加高效率的程序和系统，需要对汇编的了解

### 二、机器语言

- 其中蕴含很多历史问题

- 不同厂商或者不同架构出产的CPU所使用的机器语言会有所不同

- 机器语言是比汇编语言更低级的语言，就是一堆二进制数，通常我们不用理解
- 汇编语言会先变化成机器语言给到CPU去处理，汇编语言转换为机器语言的过程就叫汇编
- 机器码写起来非常冗长繁琐，完全不适合人去理解，是计算机的发展历史和硬件架构的共同产物

### 三、环境搭建与说明

- 使用DOSBox作为模拟环境运行
- 指令与数据是应用上的概念
- 在内存或磁盘上，指令和数据没有任何区别，都是二进制信息
- 8986从3号单元读取数据
- 指令、数据、地址 在CPU那边区分的方式是通过走的哪一条总线来判断的
- 地址总线上能存多少个不同的信息，CPU就可以对多少个存储单元进行寻址
- 多少位的电脑决定的就是寻址能力
- 地址总线的宽度决定了CPU的寻址能力
- 数据总线的宽度九二定了CPU与其他器件进行数据传送时的一次数据传送量
- 控制总线总宽度决定了CPU对系统中其他器件的控制的能力
- 内部总线实现CPU内部各个器件之间的联系
- 外部总线实现CPU和主板上其他器件的联系
- 8086CPU有14个寄存器：AX、BX、CX、DX、SI、DI、SP、BP、IP、CS、DS、ES、PSW
- 8086CPU的所有寄存器都是16位的，可以存放两个字节
- AX、BX、CX、DX通常被称为通用寄存器
- AX的低八位（0-7位）构成了AL寄存器，高八位（8-15位）构成了AH寄存器

### 四、字的概念

- 字的英文就是word
- 16位的寄存器可以存储2个字节的数据，而一个字通常占用1到4个字节，具体取决于编码方式
- 对于大多数编码方式来说，一个字可以轻松地存储在16位的寄存器中
- 8086中，一个字由两个字节组成
- 计算机只会用二进制，人民不喜欢用二进制位，人们用十六进制而不是十进制是因为十六进制和二进制之间有一个很好的转换
- B是二进制的简称、H是16进制的简称
- 常见的bin通常就是二进制文件的文件夹
- 两位十六进制数可以表示一个字节，四个十六进制数刚好表示一个字

### 五、汇编指令

- 汇编语言通常不区分大小写
- 常见的汇编指令就像mov ax,18 这句汇编语言的意思就是将18送入AX 用高级语言表示就是AX=18
- 常见的汇编指令还有add ax,8 这句汇编指令的意思就是将内存器AX中的数值加上8
- 常见的汇编指令还有mov ax,bx 这句汇编指令的意思就是将BX中的数据送入寄存器AX
- 常见的汇编指令还有add ax,bx 这句汇编指令的意思就是将AX和BX的内容相加然后保存在AX中
- 总的来说形式就是前面是操作指令，后面第一个是被操作对象，第二个是操作的参数
- 貌似第一个就是控制指令，第二个就是地址代号，第三个就是数据值
- 上面说的这个用专业的话说就是：操作码（Opcode）、操作数（Operands）、要移动的数据值
- 如果计算结果超出了位数，值不能在指定内存器中完整保存但是CPU 不是真的会丢弃这个值
- 汇编语言学会“会编”就行，主要是要培养出汇编的思维

### 六、物理地址

- 所有内存构成的内存单元在逻辑上是一个一维的线性空间
- 我们将每块空间的唯一的地址称为物理地址
- 16位的CPU具有一下特性：运算一次最多可以处理16位的数据、寄存器最大宽度为16位、寄存器和运算器之间的通路是16位的
- 8086CPU具有以下特性：有20位地址总线，可以传送20位地址，寻址能力为1M、内部为16位结构，只能传送16位的地址，表现的寻址能力却只有64K
- 8086的工程师使用两个16位的地址合成的方案来形成一个20位的物理地址（段地址+偏移地址）
- 段地址和偏移地址传入地址加法器之后经过加法器的运算得到20位的物理真实地址
- 地址加法器运算的方法：真实地址 = 段地址x16 + 偏移地址
- 16进制的数乘以16就是向左移一位
- 乘16的方法其实会导致很多问题，二进制乘以2就左移一位，16进制乘以16就左移一位
