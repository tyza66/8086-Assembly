INT 13H 是BIOS提供的一组中断服务，用于直接控制磁盘驱动器，进行低级别的磁盘读写操作。这些中断服务通常用于操作系统和引导加载程序中进行硬盘和软盘的直接访问。以下是有关 INT 13H 主要功能的详细介绍：

1. 读取扇区 (AH = 02h)
用于从磁盘读取数据到内存中。这个功能通过设置必要的寄存器来指定要读取的驱动器、起始扇区和扇区数量。

assembly
MOV AH, 02h      ; 读取扇区功能
MOV AL, 1        ; 要读取的扇区数量
MOV CH, 0        ; 柱面号
MOV CL, 1        ; 扇区号
MOV DH, 0        ; 磁头号
MOV DL, 0        ; 驱动器号（0 = A盘，1 = B盘）
MOV BX, OFFSET BUFFER ; 内存缓冲区的偏移地址
INT 13H          ; 调用中断
JC  ERROR        ; 检查是否有错误
2. 写入扇区 (AH = 03h)
用于将内存中的数据写入磁盘的特定扇区。设置寄存器以指定要写入的驱动器、起始扇区和扇区数量。

assembly
MOV AH, 03h      ; 写入扇区功能
MOV AL, 1        ; 要写入的扇区数量
MOV CH, 0        ; 柱面号
MOV CL, 1        ; 扇区号
MOV DH, 0        ; 磁头号
MOV DL, 0        ; 驱动器号（0 = A盘，1 = B盘）
MOV BX, OFFSET BUFFER ; 内存缓冲区的偏移地址
INT 13H          ; 调用中断
JC  ERROR        ; 检查是否有错误
3. 磁盘复位 (AH = 00h)
用于复位磁盘系统。这在出现错误或需要重新初始化磁盘驱动器时使用。

assembly
MOV AH, 00h      ; 磁盘复位功能
MOV DL, 0        ; 驱动器号（0 = A盘，1 = B盘）
INT 13H          ; 调用中断
4. 检查磁盘状态 (AH = 01h)
用于检查上一个磁盘操作的状态，以确定是否有错误发生。

assembly
MOV AH, 01h      ; 检查磁盘状态功能
MOV DL, 0        ; 驱动器号（0 = A盘，1 = B盘）
INT 13H          ; 调用中断
; 结果在 AH 中返回（0 = 无错误）
5. 获取磁盘参数 (AH = 08h)
用于获取磁盘驱动器参数，如每磁道的扇区数、磁头数等。

assembly
MOV AH, 08h      ; 获取驱动器参数功能
MOV DL, 0        ; 驱动器号（0 = A盘，1 = B盘）
INT 13H          ; 调用中断
; 结果在寄存器中返回
; AH = 状态
; CH = 柱面号
; CL = 扇区号
; DH = 磁头号
注意事项
错误处理：在调用 INT 13H 后，应检查进位标志（CF）以确定是否有错误发生。

保护模式：这些 BIOS 中断服务通常在实模式下使用。在保护模式下，操作系统通常会使用自己的驱动程序来实现磁盘操作。

通过这些 INT 13H 功能，程序可以直接与磁盘驱动器进行低级别的读写操作，适用于操作系统引导、磁盘工具和其他需要直接访问磁盘硬件的应用程序。